/*!
 * ng-backstretch
 * https://github.com/rprovost/ng-backstretch
 *
 * Copyright (c) 2014-2015 Ryan Provost
 * Licensed under the MIT license.
 */
angular.module("aveworks.directives",[]).directive("aveworksBackstretch",["$window","$timeout",function(a,b){return{restrict:"A",scope:{aveworksBackstretchImages:"=",aveworksBackstretchDuration:"=",aveworksBackstretchFade:"="},link:function(c,d,e){var f=[],g=5e3,h=1,i=!1,j={wrapper:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999998,position:"absolute"},image:{position:"absolute",opacity:0,margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999,transition:"all "+h+"s"}};c.wrapper=angular.element('<div class="aveworks-backstretch"></div>'),c.wrapper.css(j.wrapper),d.append(c.wrapper),c.$watch("aveworksBackstretchImages",function(a,b){a&&a.length?c.refreshImages():c.removeImageElements(!0)},!0),c.$watch("aveworksBackstretchDuration",function(a,b){g="number"==typeof c.aveworksBackstretchDuration||"string"==typeof c.aveworksBackstretchDuration?0|c.aveworksBackstretchDuration:5e3}),c.$watch("aveworksBackstretchFade",function(a,b){h="number"==typeof c.aveworksBackstretchFade||"string"==typeof c.aveworksBackstretchFade?0|c.aveworksBackstretchFade:1,j.image.transition="all "+h+"s",c.wrapper.find("img").css("transition",j.image.transition)}),c.index=0,c.removeImageElements=function(a){c.wrapper.find("img").remove(),a&&c.wrapper.css("display","none")},c.refreshImages=function(){return f=c.aveworksBackstretchImages,f=Array.isArray(f)?f:[f],g=g||5e3,0===f.length?!1:(c.removeImageElements(),c.wrapper.css("display","block"),void f.forEach(function(a,b,d){c.image=angular.element("<img>"),c.image[0].src=a,c.image.css(j.image),c.wrapper.append(c.image),c.index=0,c.image.bind("load",c.load)}))},c.load=function(a){c.ratio=this.width/this.height,c.resize(),c.show()},c.resize=function(a){var e={left:0,top:0,width:"auto",height:"auto"};i||c.wrapper.find("img").css("transition","all 0s");var f,g=d[0].offsetWidth,j=g,k=d[0].offsetHeight,l=j/c.ratio;l>=k?(f=(l-k)/2,e.top="-"+f+"px"):(l=k,j=l*c.ratio,f=(j-g)/2,e.left="-"+f+"px"),e.width=j+"px",e.height=l+"px",c.wrapper.css({width:g,height:k});for(var m=0;m<c.wrapper.children().length;m++);c.wrapper.find("img").css(e),i||b(function(){c.wrapper.find("img").css("transition","all "+h+"s")})};var k=null;c.show=function(){if(!k){var a=c.wrapper.children()[c.index];if(c.image=angular.element(a),1===f.length)return void c.image.css({opacity:1});c.image.css({opacity:1}),k=b(function(){k=null,c.image.css({opacity:0}),c.index++,c.index>=f.length&&(c.index=0),c.show()},g)}},f&&f.length&&c.refreshImages(),angular.element(a).bind("resize",c.resize)}}}]);
//# sourceMappingURL=aveworks-backstretch.min.js.map